## item2: 생성자에 매개변수가 많다면 빌더를 고려하라

- 정적 팩터리 메서드와 생성자 방식은 `선택적 매개변수가 많을 때` 적절히 대응하기 어렵다.
- 이 문제를 해결하기 위해, 세가지 방식을 제안한다.

<br>

### 점층적 생성자 패턴(telescoping constructor pattern)
#### 1. 점층적 생성자 패턴이란?
- 필수 매개변수만 받는 생성자, 필수 매개변수와 선택 매개변수 1개를 받는 생성자, 선택 매개변수를 2개까지 받는 생성자, ... , 선택 매개변수를 전부 다 받는 생성자까지 점층적으로 늘려가는 방식이다.

``` java
public class NutritionFacts {
  private final int servingSize;    //필수
  private final int servings;       //필수
  private final int calories;       //선택
  private final int fat;            //선택

  public NutritionFacts(int servingSize, int servings) {
    this(servingSize, servings, 0);
  }

  public NutritionFacts(int servingSize, int servings, int calories) {
    this(servingSize, servings, calories, 0);
  }

  public NutritionFacts(int servingSize, int servings, int calories, int fat) {
    this.servingSize = servingSize;
    this.servings = servings;
    this.calories = calories;
    this.fat = fat;
  }
}
```

#### 2. 생성자 체이닝
- 모든 매개변수를 받는 생성자를 제외하고는 `this` 를 통해 같은 클래스의 다른 생성자를 호출한다. (**생성자 체이닝**)
- `this.servingSize = servingSize`와 같은 중복되는 초기화 코드를 쓰지 않아도 되어 간결한 코드를 작성할 수 있다.
- 최종적으로 모든 초기화 로직은 마지막 생성자인 `public NutritionFacts(int servingSize, int servings, int calories, int fat)`를 실행하게 된다.

→ 클래스의 인스턴스를 만들려면, **원하는 매개변수를 포함한 생성자 중 가장 짧은 생성자** 를 골라 호출하면 된다.

#### 3. 점층적 생성자 패턴의 단점
- 클라이언트가 설정하지 않길 원하는 매개변수까지 포함하기 쉽다.
- 매개변수의 개수가 많아지면 **코드를 작성하거나 읽기 어려울 수** 있다. (가독성이 떨어진다.)
  - 매개변수의 개수가 많아지면 생성자의 개수도 많아진다.
- 타입이 같은 매개변수가 연달아 있으면, **잘못된 값을 넣어서 찾기 어려운 버그**로 이어질 수 있다.
  - 클라이언트가 실수로 매개변수 순서를 잘못 넣어도 컴파일러는 알아차릴 수 없고, 런타임에 잘못된 실행을 하게 된다.


<br>

### 자바빈즈 패턴(JavaBeans Pattern)
#### 1. 자바빈즈 패턴이란?
- 자바빈즈 패턴은 **생성자로 객체**를 만든 후, **세터(Setter) 메서드**를 호출하여 원하는 매개변수 값을 설정한다.
``` java
public class NutritionFacts {
  private int servingSize = -1;    //필수: 기본값 없음
  private int servings = -1;       //필수: 기본값 없음
  private int calories = 0;
  private int fat = 0;

  public NutritionFacts() {}

  public void setServingSize(int val) {servingSize = val;}
  public void setServings(int val) {servings = val;}
  public void setCalories(int val) {calories = val;}
  public void setFat(int val) {fat = val;}
}
```
- 점층적 생성자 패턴의 단점이 사라졌다.
- 인스턴스를 만들기 쉽고 가독성이 높은 코드로 작성할 수 있다.

#### 2. 자바빈즈 패턴의 단점
``` java
NutritionFacts pepsi = new NutritionFacts();
pepsi.setServingSize(240);
pepsi.setServings(8);
pepsi.setCalories(100);
```
- 인스턴스를 만들기 위해 여러 메서드를 호출해야 한다.
- 인스턴스가 완전히 생성되기 전까지는 **일관성**이 무너진 상태에 놓이게 된다.

👥 *일관성이 무너진 상태란 무엇일까?*



